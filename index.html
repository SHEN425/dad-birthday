<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>è€çˆ¸ç”Ÿæ—¥å¿«ä¹</title>
<meta name="description" content="å®¶åº­ç”Ÿæ—¥ç¥ç¦é¡µé¢ï¼Œä»…ç”¨äºäº²å‹ç¥ç¦">

<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",sans-serif;
  background:radial-gradient(circle at top,#4b2a82,#120016);
  color:white;
}

/* ===== åˆå§‹å¡ç‰‡ ===== */
#center{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:10;
}
#card{
  background:rgba(255,255,255,.15);
  border:1px solid rgba(255,255,255,.25);
  border-radius:22px;
  padding:28px 24px;
  width:min(88vw,420px);
  text-align:center;
  backdrop-filter:blur(12px);
}
h1{
  margin:10px 0;
  font-size:48px;
  text-shadow:0 0 30px rgba(255,200,150,.8);
}
p{opacity:.85}
button{
  border:none;
  border-radius:14px;
  padding:12px 16px;
  margin:8px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
}
#start{background:linear-gradient(135deg,#ffd27a,#ff7ab6);}
#boom{background:rgba(255,255,255,.22);color:white}

/* ===== ç¥ç¦å¼¹çª— ===== */
.bless{
  position:fixed;
  min-width:180px;
  max-width:75vw;
  padding:14px 20px;
  background:rgba(255,255,255,0.28);
  border-radius:20px;
  text-align:center;
  font-size:18px;
  font-weight:600;
  color:#fff;
  backdrop-filter:blur(14px);
  box-shadow:0 14px 36px rgba(0,0,0,.35);
  animation:pop 1.25s ease forwards;
  pointer-events:none;
  z-index:30;
}

@keyframes pop{
  0%{opacity:0;transform:scale(.6)}
  40%{opacity:1;transform:scale(1.12)}
  70%{transform:scale(1)}
  100%{opacity:0;transform:scale(.96)}
}

/* ===== å€’è®¡æ—¶ ===== */
#countdown{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:120px;
  font-weight:900;
  opacity:0;
  pointer-events:none;
  text-shadow:0 0 40px gold;
  transition:.3s;
  z-index:50;
}
#countdown.show{opacity:1}

/* ===== çº¢è‰²ç»ˆæç•Œé¢ ===== */
#final{
  position:fixed;
  inset:0;
  background:radial-gradient(circle,#ff4f87,#050008);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-size:clamp(36px,7vw,72px);
  font-weight:900;
  opacity:0;
  pointer-events:none;
  transition:.6s;
  z-index:40;
  text-align:center;
}
#final.show{
  opacity:1;
  pointer-events:auto;
}
#sign{
  margin-top:22px;
  font-size:clamp(18px,4vw,28px);
  font-weight:600;
  opacity:.9;
}
</style>
</head>

<body>

<div id="center">
  <div id="card">
    <h1>è€çˆ¸</h1>
    <p>ç‚¹ä¸€ä¸‹ï¼Œç¥ç¦ä¼šåœ¨ä½ èº«è¾¹å‡ºç° ğŸ‚</p>
    <button id="start">å¼€å§‹ç¥ç¦ ğŸ‰</button>
    <button id="boom">ğŸ† ç»ˆææƒŠå–œ</button>
  </div>
</div>

<div id="countdown"></div>

<div id="final">
  è€çˆ¸ï¼Œæˆ‘çˆ±ä½  â¤ï¸
  <div id="sign">â€”â€” ä½ äº²çˆ±çš„å¥³å„¿</div>
</div>

<audio id="music" loop>
  <source src="happy.mp3" type="audio/mpeg">
</audio>

<script>
const messages = [
  "è€çˆ¸ç”Ÿæ—¥å¿«ä¹ ğŸ‚","èº«ä½“å¥åº· ğŸ’ª","å¤©å¤©å¼€å¿ƒ ğŸ˜„","ä¸‡äº‹é¡ºæ„ âœ¨",
  "ç¦æ°”æ»¡æ»¡ ğŸ€","å¹³å®‰å–œä¹ ğŸ§§","ç¬‘å£å¸¸å¼€ ğŸ˜„","é¡ºé¡ºåˆ©åˆ© ğŸš€",
  "å°‘æ“å¿ƒï¼Œå¤šäº«ç¦ â˜€ï¸","æˆ‘ä»¬éƒ½çˆ±ä½  â¤ï¸",
  "æ„¿ä½ æ¯å¤©éƒ½æœ‰å¥½å¿ƒæƒ… ğŸŒˆ","å¹¸ç¦å¸¸ä¼´å·¦å³ ğŸŒ¸",
  "å¥åº·æœ€é‡è¦ ğŸ’š","ä»Šå¤©ä¸€å®šè¦å¼€å¿ƒ ğŸ‰",
  "ä½ ä¸€ç›´æ˜¯æˆ‘ä»¬çš„é å±± ğŸ”ï¸","å®¶æ°¸è¿œåœ¨ä½ èº«å ğŸ "
];

const center = document.getElementById("center");
const final  = document.getElementById("final");
const music  = document.getElementById("music");

/* ===== å±å¹•å®‰å…¨èŒƒå›´å†…éšæœºä½ç½® ===== */
function safePosition(){
  const padding = 20;
  const maxW = window.innerWidth  - padding;
  const maxH = window.innerHeight - padding;
  return {
    x: Math.random() * (maxW - padding) + padding,
    y: Math.random() * (maxH - padding*2) + padding
  };
}

/* ===== å¼¹ç¥ç¦ ===== */
function popBless(text, parent=document.body){
  const d = document.createElement("div");
  d.className = "bless";
  d.textContent = text;

  const pos = safePosition();
  d.style.left = pos.x + "px";
  d.style.top  = pos.y + "px";
  d.style.transform = "translate(-50%,-50%)";

  parent.appendChild(d);
  if(navigator.vibrate) navigator.vibrate(15);
  setTimeout(()=>d.remove(),1300);
}

/* ===== å€’è®¡æ—¶ ===== */
const countdown = document.getElementById("countdown");
function startCountdown(cb){
  let n=3;
  countdown.textContent=n;
  countdown.classList.add("show");
  const t=setInterval(()=>{
    n--;
    if(n>0){
      countdown.textContent=n;
      if(navigator.vibrate) navigator.vibrate(30);
    }else{
      clearInterval(t);
      countdown.classList.remove("show");
      cb();
    }
  },900);
}

/* ===== æ¨¡å¼ç»“æŸ â†’ å›åˆ°åˆå§‹ ===== */
function resetToStart(delay=1500){
  setTimeout(()=>{
    final.classList.remove("show");
    center.style.display="flex";
  },delay);
}

/* ===== ä¸­çº§æ¨¡å¼ ===== */
document.getElementById("start").onclick=()=>{
  center.style.display="none";
  music.play().catch(()=>{});
  let i=0;
  const t=setInterval(()=>{
    popBless(messages[Math.floor(Math.random()*messages.length)]);
    if(++i>=24){
      clearInterval(t);
      resetToStart();
    }
  },380);
};

/* ===== ç‚¸è£‚æ¨¡å¼ ===== */
document.getElementById("boom").onclick=()=>{
  center.style.display="none";
  music.play().catch(()=>{});
  startCountdown(()=>{
    final.classList.add("show");

    let i=0;
    const t=setInterval(()=>{
      popBless(
        messages[Math.floor(Math.random()*messages.length)],
        final
      );
      if(++i>=60){
        clearInterval(t);
        resetToStart(2200);
      }
    },160);

    if(navigator.vibrate) navigator.vibrate([40,60,40]);
  });
};
</script>

</body>
</html>
