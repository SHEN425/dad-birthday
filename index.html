<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>è€çˆ¸ç”Ÿæ—¥å¿«ä¹</title>

<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",sans-serif;
  background:radial-gradient(circle at top,#402060,#090014);
  color:white;
}

/* ä¸­å¿ƒå¡ç‰‡ */
#center{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
}
#card{
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.25);
  border-radius:22px;
  padding:28px 22px;
  width:min(90vw,480px);
  text-align:center;
  backdrop-filter:blur(10px);
}
h1{
  font-size:48px;
  margin:10px 0;
  text-shadow:0 0 30px rgba(255,200,150,.8);
}
button{
  border:none;
  border-radius:14px;
  padding:12px 16px;
  margin:6px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
}
#start{background:linear-gradient(135deg,#ffcc70,#ff6fae);}
#boom{background:rgba(255,255,255,.18);color:white}

/* ç¥ç¦å¡ç‰‡ */
.card{
  position:fixed;
  padding:12px 14px;
  border-radius:16px;
  background:rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.25);
  animation:float 4s linear forwards;
  pointer-events:none;
}
@keyframes float{
  from{opacity:0;transform:translateY(40px)}
  10%{opacity:1}
  to{opacity:0;transform:translateY(-240px)}
}

/* å€’è®¡æ—¶ */
#countdown{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:120px;
  font-weight:900;
  opacity:0;
  pointer-events:none;
  text-shadow:0 0 40px gold;
  transition:.3s;
  z-index:50;
}
#countdown.show{opacity:1}

/* ç»ˆæç¥ç¦ */
#final{
  position:fixed;
  inset:0;
  background:radial-gradient(circle,#ff4f87,#050008);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-size:clamp(34px,7vw,72px);
  font-weight:900;
  opacity:0;
  pointer-events:none;
  transition:.6s;
  z-index:99;
  text-align:center;
}
#final.show{opacity:1}
#sign{
  margin-top:20px;
  font-size:clamp(18px,4vw,28px);
  font-weight:600;
  opacity:.9;
}

/* çƒŸèŠ± */
canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
}
</style>
</head>

<body>

<div id="center">
  <div id="card">
    <h1>è€çˆ¸</h1>
    <p>ç‚¹ä¸€ä¸‹ï¼Œç¥ç¦é©¬ä¸Šâ€œç‚¸å¼€â€ ğŸ‚</p>
    <button id="start">å¼€å§‹ç¥ç¦ ğŸ‰</button>
    <button id="boom">ğŸ’¥ ç»ˆææ¨¡å¼</button>
  </div>
</div>

<div id="countdown"></div>

<div id="final">
  è€çˆ¸ï¼Œæˆ‘çˆ±ä½  â¤ï¸
  <div id="sign">â€”â€” ä½ äº²çˆ±çš„å¥³å„¿</div>
</div>

<canvas id="fireworks"></canvas>

<audio id="music" loop>
  <!-- æŠŠ happy.mp3 å’Œ index.html æ”¾åœ¨åŒä¸€ç›®å½• -->
  <source src="happy.mp3" type="audio/mpeg">
</audio>

<script>
/* ===== ç¥ç¦è¯­ ===== */
const messages=[
  "è€çˆ¸ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‚",
  "èº«ä½“å¥åº·ï¼ğŸ’ª",
  "å¤©å¤©å¼€å¿ƒï¼ğŸ˜„",
  "ä¸‡äº‹é¡ºæ„ï¼âœ¨",
  "ç¦æ°”æ»¡æ»¡ï¼ğŸ€",
  "æˆ‘ä»¬éƒ½çˆ±ä½  â¤ï¸"
];

/* ===== ç¥ç¦å¡ç‰‡ ===== */
function spawnCard(){
  const d=document.createElement("div");
  d.className="card";
  d.textContent=messages[Math.floor(Math.random()*messages.length)];
  d.style.left=Math.random()*80+10+"vw";
  d.style.top=Math.random()*70+20+"vh";
  document.body.appendChild(d);
  setTimeout(()=>d.remove(),4000);
}

/* ===== éŸ³ä¹ ===== */
const music=document.getElementById("music");

/* ===== å€’è®¡æ—¶ ===== */
const countdown=document.getElementById("countdown");
function startCountdown(cb){
  let n=3;
  countdown.textContent=n;
  countdown.classList.add("show");
  const t=setInterval(()=>{
    n--;
    if(n>0){
      countdown.textContent=n;
    }else{
      clearInterval(t);
      countdown.classList.remove("show");
      cb();
    }
  },900);
}

/* ===== çƒŸèŠ±ï¼ˆè½»é‡ï¼‰ ===== */
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
resize();window.onresize=resize;
let sparks=[];
function firework(x,y){
  for(let i=0;i<30;i++){
    sparks.push({
      x,y,
      vx:(Math.random()-0.5)*6,
      vy:(Math.random()-0.5)*6,
      life:40
    });
  }
}
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  sparks=sparks.filter(p=>p.life-- >0);
  sparks.forEach(p=>{
    p.x+=p.vx;p.y+=p.vy;
    ctx.fillStyle="rgba(255,200,120,.8)";
    ctx.fillRect(p.x,p.y,2,2);
  });
  requestAnimationFrame(loop);
}
loop();

/* ===== æŒ‰é’® ===== */
document.getElementById("start").onclick=()=>{
  music.play().catch(()=>{});
  for(let i=0;i<20;i++)setTimeout(spawnCard,i*120);
};

document.getElementById("boom").onclick=()=>{
  music.play().catch(()=>{});
  startCountdown(()=>{
    for(let i=0;i<60;i++)setTimeout(spawnCard,i*20);
    firework(innerWidth/2,innerHeight/2);
    document.getElementById("final").classList.add("show");
    setTimeout(()=>document.getElementById("final").classList.remove("show"),2600);
  });
};
</script>

</body>
</html>
