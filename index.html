<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>è€çˆ¸ç”Ÿæ—¥å¿«ä¹</title>

<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",sans-serif;
  background:radial-gradient(circle at top,#4b2a82,#120016);
  color:white;
}

/* åˆå§‹å¡ç‰‡ */
#center{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:10;
}
#card{
  background:rgba(255,255,255,.16);
  border-radius:22px;
  padding:28px 24px;
  width:min(88vw,420px);
  text-align:center;
  backdrop-filter:blur(12px);
}
h1{
  margin:10px 0;
  font-size:48px;
}
button{
  border:none;
  border-radius:14px;
  padding:12px 18px;
  margin:8px;
  font-size:16px;
  font-weight:700;
}
#start{background:linear-gradient(135deg,#ffd27a,#ff7ab6);}
#boom{background:rgba(255,255,255,.25);color:white}

/* ===== å¾®ä¿¡å®‰å…¨èˆå° ===== */
#stage{
  position:fixed;
  left:0;
  right:0;
  top:0;
  bottom:0;
  pointer-events:none;
  z-index:30;
}

/* ç¥ç¦å¼¹çª— */
.bless{
  position:absolute;
  min-width:180px;
  max-width:75vw;
  padding:14px 20px;
  background:rgba(255,255,255,0.28);
  border-radius:20px;
  text-align:center;
  font-size:18px;
  font-weight:600;
  animation:pop 1.25s ease forwards;
}

@keyframes pop{
  0%{opacity:0;transform:scale(.6)}
  40%{opacity:1;transform:scale(1.1)}
  70%{transform:scale(1)}
  100%{opacity:0;transform:scale(.95)}
}

/* å€’è®¡æ—¶ */
#countdown{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:120px;
  font-weight:900;
  opacity:0;
  transition:.3s;
  z-index:50;
}
#countdown.show{opacity:1}

/* çº¢è‰²ç»ˆæç•Œé¢ */
#final{
  position:fixed;
  inset:0;
  background:radial-gradient(circle,#ff4f87,#050008);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-size:clamp(36px,7vw,72px);
  font-weight:900;
  opacity:0;
  pointer-events:none;
  transition:.6s;
  z-index:40;
}
#final.show{opacity:1}
#sign{font-size:24px;margin-top:20px}
</style>
</head>

<body>

<div id="center">
  <div id="card">
    <h1>è€çˆ¸</h1>
    <p>ç‚¹ä¸€ä¸‹ï¼Œç¥ç¦ä¼šåœ¨ä½ èº«è¾¹å‡ºç° ğŸ‚</p>
    <button id="start">å¼€å§‹ç¥ç¦ ğŸ‰</button>
    <button id="boom">ğŸ† ç»ˆææƒŠå–œ</button>
  </div>
</div>

<div id="stage"></div>
<div id="countdown"></div>

<div id="final">
  è€çˆ¸ï¼Œæˆ‘çˆ±ä½  â¤ï¸
  <div id="sign">â€”â€” ä½ äº²çˆ±çš„å¥³å„¿</div>
</div>

<audio id="music" loop>
  <source src="happy.mp3" type="audio/mpeg">
</audio>

<script>
/* ===== æ•°æ® ===== */
const messages=[
  "è€çˆ¸ç”Ÿæ—¥å¿«ä¹ ğŸ‚","èº«ä½“å¥åº· ğŸ’ª","å¤©å¤©å¼€å¿ƒ ğŸ˜„","ä¸‡äº‹é¡ºæ„ âœ¨",
  "ç¦æ°”æ»¡æ»¡ ğŸ€","å¹³å®‰å–œä¹ ğŸ§§","ç¬‘å£å¸¸å¼€ ğŸ˜„","å°‘æ“å¿ƒ å¤šäº«ç¦ â˜€ï¸",
  "æˆ‘ä»¬éƒ½çˆ±ä½  â¤ï¸","ä½ æ°¸è¿œæ˜¯å®¶çš„é¡¶æ¢æŸ± ğŸ "
];

const center=document.getElementById("center");
const stage=document.getElementById("stage");
const final=document.getElementById("final");
const music=document.getElementById("music");
const countdown=document.getElementById("countdown");

/* ===== å¾®ä¿¡çœŸå®å¯è§†åŒºå…œåº• ===== */
function updateStage(){
  stage.style.top="72px";     // å¾®ä¿¡æ ‡é¢˜æ å…œåº•
  stage.style.bottom="36px";  // åº•éƒ¨æ‰‹åŠ¿åŒºå…œåº•
}
window.addEventListener("load",updateStage);
window.addEventListener("resize",updateStage);

/* ===== å¼ºéœ‡åŠ¨ï¼ˆAndroid ä¸Šé™ï¼‰ ===== */
function vibrateStrong(){
  if(navigator.vibrate){
    navigator.vibrate([80,40,80]);
  }
}

/* ===== å¼¹ç¥ç¦ ===== */
function popBless(text){
  const d=document.createElement("div");
  d.className="bless";
  d.textContent=text;

  const r=stage.getBoundingClientRect();
  const x=Math.random()*(r.width-40)+20;
  const y=Math.random()*(r.height-40)+20;
  d.style.left=x+"px";
  d.style.top=y+"px";

  stage.appendChild(d);
  vibrateStrong();
  setTimeout(()=>d.remove(),1300);
}

/* ===== å€’è®¡æ—¶ ===== */
function startCountdown(cb){
  let n=3;
  countdown.textContent=n;
  countdown.classList.add("show");
  vibrateStrong();

  const t=setInterval(()=>{
    n--;
    if(n>0){
      countdown.textContent=n;
      vibrateStrong();
    }else{
      clearInterval(t);
      countdown.classList.remove("show");
      cb();
    }
  },900);
}

/* ===== é‡ç½® ===== */
function reset(delay){
  setTimeout(()=>{
    final.classList.remove("show");
    center.style.display="flex";
  },delay);
}

/* ===== ä¸­çº§æ¨¡å¼ ===== */
start.onclick=()=>{
  center.style.display="none";
  music.play().catch(()=>{});
  let i=0;
  const t=setInterval(()=>{
    popBless(messages[i%messages.length]);
    if(++i>=25){
      clearInterval(t);
      reset(1200);
    }
  },350);
};

/* ===== ç‚¸è£‚æ¨¡å¼ ===== */
boom.onclick=()=>{
  center.style.display="none";
  music.play().catch(()=>{});
  startCountdown(()=>{
    final.classList.add("show");
    let i=0;
    const t=setInterval(()=>{
      popBless(messages[Math.floor(Math.random()*messages.length)]);
      if(++i>=60){
        clearInterval(t);
        reset(2200);
      }
    },160);
  });
};
</script>

</body>
</html>
